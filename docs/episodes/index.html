---
layout: default
---
{% assign comptrollers = site.episodes | map: "comptroller" | uniq %}
{% assign gameMasters = site.episodes | map: "gameMaster" | uniq  %}
{% assign guests = site.episodes | map: "guests" | uniq  %}
{% assign audienceGuests = site.episodes | map: "audienceGuests" | uniq  %}

{% assign people = comptrollers | concat: gameMasters | concat: guests | concat: audienceGuests | uniq  %}

{% assign personEpisodeCounts = "" | split: "," %}
{% for person in people %}
  {% assign episodeCount = 0  %}
  {% for ep in site.episodes %}
    {% if ep.comptroller == person or ep.gameMaster == person or ep.guests contains person or ep.audienceGuests contains person %}
      {% assign episodeCount = episodeCount | plus: 1 %}
    {% endif %}
  {% endfor %}
  
  {% assign entry = "" | split: "," %}
  {% assign entry = entry | push: person %}
  {% assign entry = entry | push: episodeCount %}
  {% assign personEpisodeCounts = personEpisodeCounts | push: entry %}
{% endfor %}

<h1>Episodes</h1>

<h2>Complete List</h2>
<p>See <a href="complete-list.html" class="wiki-link">Complete List of Episodes</a>.</p>

<h2>By Comptroller</h2>
<!-- {% assign byComptroller = site.episodes | group_by: "comptroller" | sort: "items['size']" %} -->
{% assign byComptroller = site.episodes | group_by: "comptroller" %}
<table class="episode-list grouped-by">
  <tr>
    <th>Comptroller</th>
    <th>Episode Count</th>
  </tr>
  {% for group in byComptroller %}
  <tr>
    <td>{{ group.name | default: "TBC" }}</td>
    <td>{{ group.items.size }}</td>
  </tr>
  {% endfor %}
</table>

<h2>By Venue</h2>
{% assign byVenue = site.episodes | group_by: "venue" %}
<table class="episode-list grouped-by">
  <tr>
    <th>Venue</th>
    <th>Episode Count</th>
  </tr>
  {% for group in byVenue %}
  <tr>
    <td>{{ group.name | default: "TBC" }}</td>
    <td>{{ group.items.size }}</td>
  </tr>
  {% endfor %}
</table>

<h2>By Person</h2>

<table class="episode-list grouped-by">
  <tr>
    <th>Person</th>
    <th>Episode Count</th>
  </tr>
  {% for entry in personEpisodeCounts %}
  <tr>
    <td>{{ entry[0] | default: "TBC" }}</td>
    <td>{{ entry[1] }}</td>
  </tr>
  
  {% endfor %}
</table>

<h2>By D&amp;D</h2>
TODO

{% assign meh = empty %}